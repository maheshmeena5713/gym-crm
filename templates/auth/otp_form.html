<!-- Step 3: OTP Verification (branded) -->
{% if gym_logo %}
<div class="text-center mb-5">
    <img src="{{ gym_logo }}" alt="{{ gym_name }}" class="w-14 h-14 rounded-xl mx-auto mb-2 object-cover shadow-lg">
    <p class="text-sm font-semibold text-white">{{ gym_name }}</p>
</div>
{% endif %}

<div class="flex items-center justify-between gap-2 mb-5 text-sm">
    <button type="button"
            hx-post="{% url 'frontend:validate-gym-code' %}"
            hx-target="#auth-form" hx-swap="innerHTML"
            hx-vals='{"gym_code": "{{ gym_code }}"}'
            class="text-slate-400 hover:text-white transition-colors flex items-center gap-1">
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
        </svg>
        Back
    </button>
    <div class="text-slate-400">
        OTP sent to <span class="text-white font-medium">+91 {{ phone }}</span> ðŸ“±
    </div>
</div>

<form hx-post="{% url 'frontend:verify-otp' %}"
      hx-target="#auth-form" hx-swap="innerHTML"
      class="space-y-5">
    {% csrf_token %}
    <input type="hidden" name="phone" value="{{ phone }}">
    <input type="hidden" name="gym_code" value="{{ gym_code }}">

    {% if error %}
    <div class="bg-red-500/10 border border-red-500/30 text-red-400 text-sm px-4 py-3 rounded-xl">
        {{ error }}
    </div>
    {% endif %}

    <div>
        <label for="otp" class="block text-sm font-medium text-slate-300 mb-2">Enter OTP</label>
        <input type="text" name="otp" id="otp"
               placeholder="â— â— â— â— â— â—"
               maxlength="6" pattern="[0-9]{6}" inputmode="numeric"
               class="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white
                      text-center text-2xl tracking-[0.5em] font-mono
                      placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent
                      transition-all"
               autofocus required>
    </div>

    <button type="submit"
            class="w-full py-3 px-4 bg-brand-600 hover:bg-brand-700 text-white font-semibold
                   rounded-xl transition-all duration-200 flex items-center justify-center gap-2">
        <span class="htmx-indicator">
            <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
            </svg>
        </span>
        Verify & Login
    </button>

    <!-- Dev hint -->
    <p class="text-center text-slate-600 text-xs">
        Dev mode: use OTP <span class="text-brand-400 font-mono">123456</span>
    </p>
</form>
